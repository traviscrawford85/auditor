# copilot-audit: true
# Description: This file is a modular part of a larger OpenAPI specification for a Clio API integration.
# Objective: Audit this spec segment for completeness, correctness, and consistency with OpenAPI 3.1 standards.
# Tasks:
# 1. Verify valid OpenAPI syntax (YAML structure, keys).
# 2. Confirm all `$ref` targets exist and are reachable (local or shared component references).
# 3. Ensure operationId values are unique, descriptive, and follow the {method}_{resource} pattern.
# 4. Check that requestBody and response schemas use proper `$ref`s and avoid inline duplication.
# 5. Validate that all schemas and components are named clearly and represent their intent.
# 6. Detect and flag unused components under `components.schemas`, `components.responses`, etc.
# 7. Review tag usage for clarity, grouping, and alignment with x-tagGroups (if used).
# 8. Enforce use of standard HTTP methods and response codes (e.g., 200, 201, 400, 404, 422, 500).
# 9. Validate pagination, filtering, and sorting patterns for list endpoints.
# 10. Check that the top-level spec (if root) defines: openapi version, info, servers, paths, components, and tags.
# 11. Ensure every schema property has a `type` and if applicable a `format`; infer missing types where possible.
# 12. Recommend stronger type hints (e.g., `integer` vs `string`, `date-time` vs `string`) where obvious.
# Output:
# - A checklist of errors or improvements, preferably with line references.
# - Suggestions for how to fix or improve structure, naming, reuse, and typing.
#
# NOTE: This file is part of a spec intended to generate a custom Python client using `openapi-python-client`,
# which expects well-formed operationIds and `$ref`s to derive method names and models.

$defs:
  ClioPaymentsLinkCreateRequestDataDestinationAccount:
    description: ClioPaymentsLinkCreateRequestDataDestinationAccount
    properties:
      id:
        description: The ID of the bank account that the payment will be deposited
          into.
        title: Id
        type: integer
    required:
    - id
    title: ClioPaymentsLinkCreateRequestDataDestinationAccount
    type: object
  ClioPaymentsLinkCreateRequestDataDestinationContact:
    description: ClioPaymentsLinkCreateRequestDataDestinationContact
    properties:
      id:
        anyOf:
        - type: integer
        - type: 'null'
        default: null
        description: Only applicable for a direct payment. The contact that the payment
          will be associated with. If not defined, and the payment is collecting an
          unallocated balance, then the payment can be associated with a contact manually
          within Manage after it has been made.
        title: Id
    title: ClioPaymentsLinkCreateRequestDataDestinationContact
    type: object
  ClioPaymentsLinkCreateRequestDataSubject:
    description: ClioPaymentsLinkCreateRequestDataSubject
    properties:
      id:
        description: The ID of the record associated with the payment link.
        title: Id
        type: integer
      type:
        description: 'The type of the record associated with the payment link. The
          type of record determines the behavior of the payment link.  Type of subject
          object: * ''BankAccount'' results in a payment link for a direct payment.
          * ''Bill'' results in a payment link for paying an existing invoice or trust
          request. * ''Contact'' results in a payment link for paying the outstanding
          invoices of a contact. '
        title: Type
        type: string
    required:
    - id
    - type
    title: ClioPaymentsLinkCreateRequestDataSubject
    type: object
description: ClioPaymentsLinkCreateRequestData
properties:
  amount:
    anyOf:
    - type: number
    - type: integer
    - type: 'null'
    default: null
    description: The amount to be paid. If not provided, the client will be able to
      specify an amount.
    title: Amount
  currency:
    description: The currency the payment will be processed in. The supported currency
      depends on the account's location ('USD' for a US account). The currency must
      be a valid ISO 4217 currency code.
    title: Currency
    type: string
  description:
    description: Only applicable for a direct payment. A short description of the
      purpose of the payment. Max 255 characters.
    title: Description
    type: string
  destination_account:
    $ref: '#/$defs/ClioPaymentsLinkCreateRequestDataDestinationAccount'
  destination_contact:
    anyOf:
    - $ref: '#/$defs/ClioPaymentsLinkCreateRequestDataDestinationContact'
    - type: 'null'
    default: null
  duration:
    description: The amount of time, in seconds, that the payment link will be active
      for. The maximum allowed value is '7776000' (90 days in seconds).
    title: Duration
    type: integer
  email_address:
    anyOf:
    - type: string
    - type: 'null'
    default: null
    description: Pre-fills the relevant field for the client when filling out their
      details in the payment link.
    title: Email Address
  is_allocated_as_revenue:
    anyOf:
    - type: boolean
    - type: 'null'
    default: null
    description: Only applicable for a direct payment. If true, the payment will be
      allocated as revenue. If false, the payment will be collected as an unallocated
      balance. Payments into trust can not be allocated as revenue. Defaults to false.
    title: Is Allocated As Revenue
  subject:
    $ref: '#/$defs/ClioPaymentsLinkCreateRequestDataSubject'
required:
- currency
- description
- destination_account
- duration
- subject
title: ClioPaymentsLinkCreateRequestData
type: object
