# copilot-audit: true
# Description: This file is a modular part of a larger OpenAPI specification for a Clio API integration.
# Objective: Audit this spec segment for completeness, correctness, and consistency with OpenAPI 3.1 standards.
# Tasks:
# 1. Verify valid OpenAPI syntax (YAML structure, keys).
# 2. Confirm all `$ref` targets exist and are reachable (local or shared component references).
# 3. Ensure operationId values are unique, descriptive, and follow the {method}_{resource} pattern.
# 4. Check that requestBody and response schemas use proper `$ref`s and avoid inline duplication.
# 5. Validate that all schemas and components are named clearly and represent their intent.
# 6. Detect and flag unused components under `components.schemas`, `components.responses`, etc.
# 7. Review tag usage for clarity, grouping, and alignment with x-tagGroups (if used).
# 8. Enforce use of standard HTTP methods and response codes (e.g., 200, 201, 400, 404, 422, 500).
# 9. Validate pagination, filtering, and sorting patterns for list endpoints.
# 10. Check that the top-level spec (if root) defines: openapi version, info, servers, paths, components, and tags.
# Output:
# - A checklist of errors or improvements, preferably with line references.
# - Suggestions for how to fix or improve structure, naming, and reuse.
#
# NOTE: This file is part of a spec intended to generate a custom Python client using `openapi-python-client`,
# which expects well-formed operationIds and `$ref`s to derive method names and models.

description: Request Body for Links
content:
  application/json:
    schema:
      type: object
      required:
        - data
      properties:
        data:
          type: object
          properties:
            amount:
              type: number
              format: double
              description: >-
                The amount to be paid. If not provided, the client will be able
                to specify an amount.
            currency:
              type: string
              description: >-
                The currency the payment will be processed in. The supported
                currency depends on the account's location ('USD' for a US
                account). The currency must be a valid ISO 4217 currency code.
            description:
              type: string
              description: >-
                Only applicable for a direct payment. A short description of the
                purpose of the payment. Max 255 characters.
            destination_account:
              type: object
              properties:
                id:
                  type: integer
                  format: int64
                  description: >-
                    The ID of the bank account that the payment will be
                    deposited into.
              required:
                - id
            destination_contact:
              type: object
              properties:
                id:
                  type: integer
                  format: int64
                  description: >-
                    Only applicable for a direct payment. The contact that the
                    payment will be associated with. If not defined, and the
                    payment is collecting an unallocated balance, then the
                    payment can be associated with a contact manually within
                    Manage after it has been made.
            duration:
              type: integer
              format: int64
              description: >-
                The amount of time, in seconds, that the payment link will be
                active for. The maximum allowed value is '7776000' (90 days in
                seconds).
            email_address:
              type: string
              description: >-
                Pre-fills the relevant field for the client when filling out
                their details in the payment link.
            is_allocated_as_revenue:
              type: boolean
              description: >-
                Only applicable for a direct payment. If true, the payment will
                be allocated as revenue. If false, the payment will be collected
                as an unallocated balance. Payments into trust can not be
                allocated as revenue. Defaults to false.
            subject:
              type: object
              properties:
                id:
                  type: integer
                  format: int64
                  description: The ID of the record associated with the payment link.
                type:
                  type: string
                  enum:
                    - BankAccount
                    - Bill
                    - Contact
                  description: >
                    The type of the record associated with the payment link. The
                    type of record determines the behavior of the payment link.


                    Type of subject object:

                    * 'BankAccount' results in a payment link for a direct
                    payment.

                    * 'Bill' results in a payment link for paying an existing
                    invoice or trust request.

                    * 'Contact' results in a payment link for paying the
                    outstanding invoices of a contact.
              required:
                - id
                - type
          required:
            - currency
            - description
            - destination_account
            - duration
            - subject
  application/x-www-form-urlencoded:
    schema:
      type: object
      required:
        - data
      properties:
        data:
          type: object
          properties:
            amount:
              type: number
              format: double
              description: >-
                The amount to be paid. If not provided, the client will be able
                to specify an amount.
            currency:
              type: string
              description: >-
                The currency the payment will be processed in. The supported
                currency depends on the account's location ('USD' for a US
                account). The currency must be a valid ISO 4217 currency code.
            description:
              type: string
              description: >-
                Only applicable for a direct payment. A short description of the
                purpose of the payment. Max 255 characters.
            destination_account:
              type: object
              properties:
                id:
                  type: integer
                  format: int64
                  description: >-
                    The ID of the bank account that the payment will be
                    deposited into.
              required:
                - id
            destination_contact:
              type: object
              properties:
                id:
                  type: integer
                  format: int64
                  description: >-
                    Only applicable for a direct payment. The contact that the
                    payment will be associated with. If not defined, and the
                    payment is collecting an unallocated balance, then the
                    payment can be associated with a contact manually within
                    Manage after it has been made.
            duration:
              type: integer
              format: int64
              description: >-
                The amount of time, in seconds, that the payment link will be
                active for. The maximum allowed value is '7776000' (90 days in
                seconds).
            email_address:
              type: string
              description: >-
                Pre-fills the relevant field for the client when filling out
                their details in the payment link.
            is_allocated_as_revenue:
              type: boolean
              description: >-
                Only applicable for a direct payment. If true, the payment will
                be allocated as revenue. If false, the payment will be collected
                as an unallocated balance. Payments into trust can not be
                allocated as revenue. Defaults to false.
            subject:
              type: object
              properties:
                id:
                  type: integer
                  format: int64
                  description: The ID of the record associated with the payment link.
                type:
                  type: string
                  enum:
                    - BankAccount
                    - Bill
                    - Contact
                  description: >
                    The type of the record associated with the payment link. The
                    type of record determines the behavior of the payment link.


                    Type of subject object:

                    * 'BankAccount' results in a payment link for a direct
                    payment.

                    * 'Bill' results in a payment link for paying an existing
                    invoice or trust request.

                    * 'Contact' results in a payment link for paying the
                    outstanding invoices of a contact.
              required:
                - id
                - type
          required:
            - currency
            - description
            - destination_account
            - duration
            - subject
  multipart/form-data:
    schema:
      type: object
      required:
        - data
      properties:
        data:
          type: object
          properties:
            amount:
              type: number
              format: double
              description: >-
                The amount to be paid. If not provided, the client will be able
                to specify an amount.
            currency:
              type: string
              description: >-
                The currency the payment will be processed in. The supported
                currency depends on the account's location ('USD' for a US
                account). The currency must be a valid ISO 4217 currency code.
            description:
              type: string
              description: >-
                Only applicable for a direct payment. A short description of the
                purpose of the payment. Max 255 characters.
            destination_account:
              type: object
              properties:
                id:
                  type: integer
                  format: int64
                  description: >-
                    The ID of the bank account that the payment will be
                    deposited into.
              required:
                - id
            destination_contact:
              type: object
              properties:
                id:
                  type: integer
                  format: int64
                  description: >-
                    Only applicable for a direct payment. The contact that the
                    payment will be associated with. If not defined, and the
                    payment is collecting an unallocated balance, then the
                    payment can be associated with a contact manually within
                    Manage after it has been made.
            duration:
              type: integer
              format: int64
              description: >-
                The amount of time, in seconds, that the payment link will be
                active for. The maximum allowed value is '7776000' (90 days in
                seconds).
            email_address:
              type: string
              description: >-
                Pre-fills the relevant field for the client when filling out
                their details in the payment link.
            is_allocated_as_revenue:
              type: boolean
              description: >-
                Only applicable for a direct payment. If true, the payment will
                be allocated as revenue. If false, the payment will be collected
                as an unallocated balance. Payments into trust can not be
                allocated as revenue. Defaults to false.
            subject:
              type: object
              properties:
                id:
                  type: integer
                  format: int64
                  description: The ID of the record associated with the payment link.
                type:
                  type: string
                  enum:
                    - BankAccount
                    - Bill
                    - Contact
                  description: >
                    The type of the record associated with the payment link. The
                    type of record determines the behavior of the payment link.


                    Type of subject object:

                    * 'BankAccount' results in a payment link for a direct
                    payment.

                    * 'Bill' results in a payment link for paying an existing
                    invoice or trust request.

                    * 'Contact' results in a payment link for paying the
                    outstanding invoices of a contact.
              required:
                - id
                - type
          required:
            - currency
            - description
            - destination_account
            - duration
            - subject
required: false
